<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - Rhyll</title>
    <link rel="icon" type="image/png" href="images/icon-light-32x32.png">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Header (same as index.html) -->
    <header class="header">
        <div class="header-container">
            <div class="header-content">
                <a href="index.html"><img src="images/rhyll-logo.png" alt="Rhyll" class="logo"><h2>Super Store</h2></a>
                <form id="search-form" class="search-form">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" name="search" placeholder="Search products..." class="search-input">
                    </div>
                </form>
                <div class="flex items-center gap-4">
                    <nav class="header-nav">
                        <a href="products.html" class="nav-link">Shop</a>
                        <a href="login.html" id="login-link" class="nav-link">Login</a>
                        <a href="dashboard.html" id="account-link" class="nav-link" style="display: none;">Account</a>
                        <button onclick="logout()" id="logout-btn" class="nav-link"
                            style="display: none; background: none; border: none; cursor: pointer;"><i
                                class="fas fa-sign-out-alt"></i> Logout</button>
                        <a href="signup.html" id="signup-btn" class="btn btn-primary btn-sm">Sign Up</a>
                    </nav>
                    <div class="flex items-center gap-3">
                        <a href="wishlist.html" class="icon-link">
                            <i class="fas fa-heart" style="width: 20px; height: 20px;"></i>
                            <span id="wishlist-count" class="icon-badge red" style="display: none;">0</span>
                        </a>
                        <a href="cart.html" class="icon-link">
                            <i class="fas fa-shopping-cart" style="width: 20px; height: 20px;"></i>
                            <span id="cart-count" class="icon-badge" style="display: none;">0</span>
                        </a>
                    </div>
                    <button id="mobile-menu-btn" class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
                </div>
            </div>
            <form id="mobile-search-form" class="mobile-search">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" name="search" placeholder="Search products..." class="search-input">
                </div>
            </form>
            <nav id="mobile-nav" class="mobile-nav">
                <a href="products.html" class="mobile-nav-link">Shop</a>
                <a href="login.html" class="mobile-nav-link">Login</a>
                <a href="signup.html" class="mobile-nav-link">Sign Up</a>
            </nav>
        </div>
    </header>

    <main class="container py-20">
        <h1 class="text-4xl font-bold text-slate-900 mb-8">All Products</h1>

        <!-- Category Filter -->
        <div class="mb-8 flex gap-2 overflow-x-auto pb-2">
            <button onclick="filterByCategory(null)" class="btn btn-sm category-filter-btn active"
                data-category="all">All</button>
            <button onclick="filterByCategory('grocery')" class="btn btn-sm btn-outline category-filter-btn"
                data-category="grocery">Grocery</button>
            <button onclick="filterByCategory('bakery')" class="btn btn-sm btn-outline category-filter-btn"
                data-category="bakery">Bakery</button>
            <button onclick="filterByCategory('baby-care')" class="btn btn-sm btn-outline category-filter-btn"
                data-category="baby-care">Baby Care</button>
            <button onclick="filterByCategory('health-beauty')" class="btn btn-sm btn-outline category-filter-btn"
                data-category="health-beauty">Health & Beauty</button>
            <button onclick="filterByCategory('household')" class="btn btn-sm btn-outline category-filter-btn"
                data-category="household">Household</button>
            <button onclick="filterByCategory('drinks')" class="btn btn-sm btn-outline category-filter-btn"
                data-category="drinks">Drinks</button>
            <button onclick="filterByCategory('crockery')" class="btn btn-sm btn-outline category-filter-btn"
                data-category="crockery">Crockery</button>
        </div>

        <!-- Products Grid -->
        <div id="products-grid" class="grid lg:grid-cols-6 md:grid-cols-3 grid-cols-2 gap-6"></div>

        <div id="no-results" class="text-center py-12" style="display: none;">
            <p class="text-xl text-slate-600">No products found</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <img src="images/rhyll-logo.png" alt="Rhyll" class="footer-logo">
                    <p class="text-sm">Your trusted destination for quality groceries and household essentials.</p>
                </div>
                <div>
                    <h4 class="footer-title">Shop</h4>
                    <ul class="footer-links">
                        <li><a href="products.html" class="footer-link">All Products</a></li>
                        <li><a href="products.html?category=grocery" class="footer-link">Grocery</a></li>
                        <li><a href="products.html?category=bakery" class="footer-link">Bakery</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-title">Company</h4>
                    <ul class="footer-links">
                        <li><a href="index.html" class="footer-link">About Us</a></li>
                        <li><a href="index.html" class="footer-link">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-title">Legal</h4>
                    <ul class="footer-links">
                        <li><a href="index.html" class="footer-link">Privacy Policy</a></li>
                        <li><a href="index.html" class="footer-link">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Rhyll. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/cart.js"></script>
    <script>
        let currentCategory = null;
        let currentSearch = null;

        function renderProducts() {
            const filtered = filterProducts(currentCategory, currentSearch);
            const grid = document.getElementById('products-grid');
            const noResults = document.getElementById('no-results');

            if (filtered.length === 0) {
                grid.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }

            noResults.style.display = 'none';
            grid.innerHTML = filtered.map(product => `
        <div class="product-card">
          <div class="product-image-container">
            <img src="${product.image}" alt="${product.name}" class="product-image">
            <button onclick="toggleWishlist(${product.id})" class="wishlist-btn" data-product-id="${product.id}" title="Add to Wishlist">
              <i class="far fa-heart"></i>
            </button>
            ${product.rating > 4.8 ? '<span class="product-badge">Premium</span>' : ''}
          </div>
          <div class="product-info">
            <h3 class="product-name">${product.name}</h3>
            <div class="product-meta">
              <span class="product-price">Â£${product.price}</span>
              <span class="product-rating">
                <i class="fas fa-star" style="font-size: 0.75rem;"></i>
                ${product.rating}
              </span>
            </div>
            <div class="flex gap-2">
              <button onclick="addToCart(${product.id})" class="btn btn-primary btn-sm" style="flex: 1;">
                <i class="fas fa-shopping-cart"></i> Add to Cart
              </button>
              <a href="product-detail.html?id=${product.id}" class="btn btn-outline btn-sm">
                <i class="fas fa-eye"></i>
              </a>
            </div>
          </div>
        </div>
      `).join('');
        }

        // Removed local toggleWishlist as it's now in main.js

        function filterByCategory(category) {
            currentCategory = category;
            renderProducts();

            // Update button styles
            document.querySelectorAll('.category-filter-btn').forEach(btn => {
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-outline');
            });

            const activeBtn = category ?
                document.querySelector(`[data-category="${category}"]`) :
                document.querySelector('[data-category="all"]');

            if (activeBtn) {
                activeBtn.classList.remove('btn-outline');
                activeBtn.classList.add('btn-primary');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const categoryParam = urlParams.get('category');
            const searchParam = urlParams.get('search');

            if (searchParam) {
                currentSearch = searchParam;
                document.querySelector('#search-form input').value = searchParam;
            }

            if (categoryParam) {
                filterByCategory(categoryParam);
            } else {
                renderProducts();
            }
        });
    </script>
</body>

</html>