<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail - Rhyll</title>
    <link rel="icon" type="image/png" href="images/icon-light-32x32.png">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-content">
                <a href="index.html"><img src="images/rhyll-logo.png" alt="Rhyll" class="logo"></a>
                <form id="search-form" class="search-form">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" name="search" placeholder="Search products..." class="search-input">
                    </div>
                </form>
                <div class="flex items-center gap-4">
                    <nav class="header-nav">
                        <a href="products.html" class="nav-link">Shop</a>
                        <a href="login.html" id="login-link" class="nav-link">Login</a>
                        <a href="dashboard.html" id="account-link" class="nav-link" style="display: none;">Account</a>
                        <button onclick="logout()" id="logout-btn" class="nav-link"
                            style="display: none; background: none; border: none; cursor: pointer;"><i
                                class="fas fa-sign-out-alt"></i> Logout</button>
                        <a href="signup.html" id="signup-btn" class="btn btn-primary btn-sm">Sign Up</a>
                    </nav>
                    <div class="flex items-center gap-3">
                        <a href="wishlist.html" class="icon-link">
                            <i class="fas fa-heart" style="width: 20px; height: 20px;"></i>
                            <span id="wishlist-count" class="icon-badge red" style="display: none;">0</span>
                        </a>
                        <a href="cart.html" class="icon-link">
                            <i class="fas fa-shopping-cart" style="width: 20px; height: 20px;"></i>
                            <span id="cart-count" class="icon-badge" style="display: none;">0</span>
                        </a>
                    </div>
                    <button id="mobile-menu-btn" class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
                </div>
            </div>
        </div>
    </header>

    <main class="container py-20">
        <a href="products.html" class="text-blue-600 mb-6 inline-block">← Back to Products</a>

        <div id="product-detail" class="grid lg:grid-cols-2 gap-12"></div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div><img src="images/rhyll-logo.png" alt="Rhyll" class="footer-logo">
                    <p class="text-sm">Your trusted destination for quality groceries and household essentials.</p>
                </div>
                <div>
                    <h4 class="footer-title">Shop</h4>
                    <ul class="footer-links">
                        <li><a href="products.html" class="footer-link">All Products</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-title">Company</h4>
                    <ul class="footer-links">
                        <li><a href="index.html" class="footer-link">About Us</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-title">Legal</h4>
                    <ul class="footer-links">
                        <li><a href="index.html" class="footer-link">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Rhyll. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/cart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = parseInt(urlParams.get('id'));
            const product = getProductById(productId);

            if (!product) {
                document.getElementById('product-detail').innerHTML = '<p class="text-xl text-slate-600">Product not found</p>';
                return;
            }

            const inWishlist = isInWishlist(productId);

            document.getElementById('product-detail').innerHTML = `
        <div class="bg-slate-100 rounded-2xl p-8 flex items-center justify-center">
          <img src="${product.image}" alt="${product.name}" style="max-width: 100%; max-height: 32rem; object-fit: contain;">
        </div>
        <div>
          <span class="badge badge-blue mb-4">${product.category}</span>
          <h1 class="text-4xl font-bold text-slate-900 mb-4">${product.name}</h1>
          <p class="text-slate-600 text-lg mb-6">${product.description}</p>
          
          <div class="flex items-center gap-6 mb-8">
            <div class="text-5xl font-bold text-blue-600">£${product.price}</div>
            <div class="flex items-center gap-2 bg-slate-100 px-4 py-2 rounded-lg">
              <span class="text-xl font-semibold text-slate-900">★ ${product.rating}</span>
              <span class="text-sm text-slate-600">(${product.reviews} reviews)</span>
            </div>
          </div>

          <div class="mb-6">
            <span class="text-sm font-semibold ${product.inStock ? 'text-green-600' : 'text-red-600'}">
              ${product.inStock ? '✓ In Stock' : '✗ Out of Stock'}
            </span>
          </div>

          <div class="flex gap-4 mb-6">
            <button onclick="addToCart(${product.id})" class="btn btn-primary" style="flex: 1;">
              <i class="fas fa-shopping-cart"></i> Add to Cart
            </button>
            <button onclick="toggleWishlist(${product.id}); location.reload();" class="btn btn-outline" style="padding: 0.75rem 1.5rem;">
              <i class="fas fa-heart ${inWishlist ? 'text-red-600' : ''}"></i>
            </button>
            <button onclick="openShareModal('${product.name}')" class="btn btn-outline" style="padding: 0.75rem 1.5rem;">
              <i class="fas fa-share-alt"></i>
            </button>
          </div>

          <div class="border-t border-slate-200 pt-6">
            <h3 class="font-semibold text-slate-900 mb-2">Product Details</h3>
            <ul class="text-slate-600 space-y-1">
              <li>• Category: ${product.category}</li>
              <li>• Rating: ${product.rating}/5.0</li>
              <li>• Reviews: ${product.reviews}</li>
            </ul>
          </div>
        </div>
      `;
        });
    </script>

    <!-- Share Modal -->
    <div id="share-modal" class="modal-overlay" style="display: none;"
        onclick="if(event.target === this) closeShareModal()">
        <div class="modal-content">
            <h2 class="modal-title">Share Product</h2>
            <div class="modal-buttons">
                <button onclick="shareViaWhatsApp()" class="modal-btn"><i class="fab fa-whatsapp"
                        style="color: #16a34a;"></i><span class="modal-btn-text">Share on WhatsApp</span></button>
                <button onclick="shareViaFacebook()" class="modal-btn"><i class="fab fa-facebook"
                        style="color: var(--primary-blue);"></i><span class="modal-btn-text">Share on
                        Facebook</span></button>
                <button onclick="copyShareLink()" class="modal-btn"><i class="fas fa-copy"></i><span
                        class="modal-btn-text">Copy Link</span></button>
            </div>
            <button onclick="closeShareModal()" class="btn btn-full"
                style="background-color: var(--slate-100); color: var(--slate-900);">Close</button>
        </div>
    </div>
</body>

</html>